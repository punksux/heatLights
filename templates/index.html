<!--suppress ALL -->
<html>
<head>
    <title>Christmas Lights and Gutter Heater Control</title>
    <meta name="viewport" content="width=device-width,height=device-height,minimum-scale=1,maximum-scale=1"/>
    <link rel="shortcut icon" href="/static/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/static/favicon.ico" type="image/x-icon">
    <script type="text/javascript">
        window.onload = function () {
            var chart = new CanvasJS.Chart("chartContainer",{
                backgroundColor: "#222",
                animationEnabled: true,
                toolTip: {
                    shared: "true"
                },
                legend:{
                    fontColor:'white'
                },
                axisY:{
                    /*title:"Temp",*/
                    valueFormatString:"##.#Â°",
                    gridThickness: 1
                },
                axisX:{
                    valueFormatString:"hh:mm"
                },
                axisY2: {
                    /*title: "Heat On",*/
                    interval: 1,
                    minimum:0,
                    maximum:1
                },
                data: [{
                    name: "Heat",
                    showInLegend: true,
                    legendMarkerType: "square",
                    type: "stepArea",
                    color: "rgba(255,0,0,.7)",
                    markerSize: 0,
                    label: "",
                    axisYType: "secondary",
                    dataPoints: [
    {x: new Date({{ log[log|count-16].split('|')[0] }}),y: parseFloat("{{ log[log|count-16].split('|')[2] }}")},
    {x: new Date({{ log[log|count-15].split('|')[0] }}),y: parseFloat("{{ log[log|count-15].split('|')[2] }}")},
    {x: new Date({{ log[log|count-14].split('|')[0] }}),y: parseFloat("{{ log[log|count-14].split('|')[2] }}")},
    {x: new Date({{ log[log|count-13].split('|')[0] }}),y: parseFloat("{{ log[log|count-13].split('|')[2] }}")},
    {x: new Date({{ log[log|count-12].split('|')[0] }}),y: parseFloat("{{ log[log|count-12].split('|')[2] }}")},
    {x: new Date({{ log[log|count-11].split('|')[0] }}),y: parseFloat("{{ log[log|count-11].split('|')[2] }}")},
    {x: new Date({{ log[log|count-10].split('|')[0] }}),y: parseFloat("{{ log[log|count-10].split('|')[2] }}")},
    {x: new Date({{ log[log|count-9].split('|')[0] }}),y: parseFloat("{{ log[log|count-9].split('|')[2] }}")},
    {x: new Date({{ log[log|count-8].split('|')[0] }}),y: parseFloat("{{ log[log|count-8].split('|')[2] }}")},
    {x: new Date({{ log[log|count-7].split('|')[0] }}),y: parseFloat("{{ log[log|count-7].split('|')[2] }}")},
    {x: new Date({{ log[log|count-6].split('|')[0] }}),y: parseFloat("{{ log[log|count-6].split('|')[2] }}")},
    {x: new Date({{ log[log|count-5].split('|')[0] }}),y: parseFloat("{{ log[log|count-5].split('|')[2] }}")},
    {x: new Date({{ log[log|count-4].split('|')[0] }}),y: parseFloat("{{ log[log|count-4].split('|')[2] }}")},
    {x: new Date({{ log[log|count-3].split('|')[0] }}),y: parseFloat("{{ log[log|count-3].split('|')[2] }}")},
    {x: new Date({{ log[log|count-2].split('|')[0] }}),y: parseFloat("{{ log[log|count-2].split('|')[2] }}")},
    {x: new Date({{ log[log|count-1].split('|')[0] }}),y: parseFloat("{{ log[log|count-1].split('|')[2] }}")}
                    ]
                },
                {
                    name:"Temp",
                    showInLegend: true,
                    legendMarkerType: "square",
                    xValueType: "dateTime",
                    type: "splineArea",
                    color: "rgba(54,158,173,0.95)",
                    dataPoints: [
    {x: new Date({{ log[log|count-16].split('|')[0] }}),y: parseFloat("{{ log[log|count-16].split('|')[1] }}")},
    {x: new Date({{ log[log|count-15].split('|')[0] }}),y: parseFloat("{{ log[log|count-15].split('|')[1] }}")},
    {x: new Date({{ log[log|count-14].split('|')[0] }}),y: parseFloat("{{ log[log|count-14].split('|')[1] }}")},
    {x: new Date({{ log[log|count-13].split('|')[0] }}),y: parseFloat("{{ log[log|count-13].split('|')[1] }}")},
    {x: new Date({{ log[log|count-12].split('|')[0] }}),y: parseFloat("{{ log[log|count-12].split('|')[1] }}")},
    {x: new Date({{ log[log|count-11].split('|')[0] }}),y: parseFloat("{{ log[log|count-11].split('|')[1] }}")},
    {x: new Date({{ log[log|count-10].split('|')[0] }}),y: parseFloat("{{ log[log|count-10].split('|')[1] }}")},
    {x: new Date({{ log[log|count-9].split('|')[0] }}),y: parseFloat("{{ log[log|count-9].split('|')[1] }}")},
    {x: new Date({{ log[log|count-8].split('|')[0] }}),y: parseFloat("{{ log[log|count-8].split('|')[1] }}")},
    {x: new Date({{ log[log|count-7].split('|')[0] }}),y: parseFloat("{{ log[log|count-7].split('|')[1] }}")},
    {x: new Date({{ log[log|count-6].split('|')[0] }}),y: parseFloat("{{ log[log|count-6].split('|')[1] }}")},
    {x: new Date({{ log[log|count-5].split('|')[0] }}),y: parseFloat("{{ log[log|count-5].split('|')[1] }}")},
    {x: new Date({{ log[log|count-4].split('|')[0] }}),y: parseFloat("{{ log[log|count-4].split('|')[1] }}")},
    {x: new Date({{ log[log|count-3].split('|')[0] }}),y: parseFloat("{{ log[log|count-3].split('|')[1] }}")},
    {x: new Date({{ log[log|count-2].split('|')[0] }}),y: parseFloat("{{ log[log|count-2].split('|')[1] }}")},
    {x: new Date({{ log[log|count-1].split('|')[0] }}),y: parseFloat("{{ log[log|count-1].split('|')[1] }}")}
                    ]
        }]});
        chart.render();

    }
    </script>
    <script type="text/javascript" src="/static/canvasjs.min.js"></script>
    <script src="/static/jquery-2.1.1.min.js"></script>
    <script src="/static/jquery-ui.js"></script>
    <script src="/static/snowstorm-min.js"></script>
    <script>
        snowStorm.snowColor = '#ffffff';
        snowStorm.flakesMaxActive = 96;
        snowStorm.followMouse = false;
        snowStorm.snowCharacter = '*';
        snowStorm.autoStart = true;
    </script>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.11.1/themes/smoothness/jquery-ui.css">
    <link rel="stylesheet" href="/static/style.css">
    <link rel="stylesheet" href="/static/bulbs.css">
    <link type="text/css" rel="stylesheet" href="/static/styleMobile.css" media="only screen and (max-width: 999px)" />
    <script>
        $(function() {
            (function(a){(jQuery.browser=jQuery.browser||{}).mobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))})(navigator.userAgent||navigator.vendor||window.opera);
            if (jQuery.browser.mobile === false) {
                $("#start_date").datepicker();
            }
        });
    </script>
</head>

<body>
<input id="timer" value={{ timer }} />
<script>
	if (parseInt(document.getElementById("timer").value) > 0){
			setTimeout('window.location.reload(true)',(parseInt(document.getElementById("timer").value)*60000) )
		}
</script>
<div id="content">
	<div id="bulbs">
		{% for x in range(1,19) %}
			<div id="base{{ x }}" class="bases"></div>
		{% endfor %}
	{% if lights_on %}
		<div class="bulb lights_on_red" id="b1"></div>
		<div class="bulb lights_on_blue" id="b2"></div>
		<div class="bulb lights_on_yellow" id="b3"></div>
		<div class="bulb lights_on_green" id="b4"></div>
		<div class="bulb lights_on_purple" id="b5"></div>
		<div class="bulb lights_on_orange" id="b6"></div>
		<div class="bulb lights_on_red" id="b7"></div>
		<div class="bulb lights_on_blue" id="b8"></div>
		<div class="bulb lights_on_yellow" id="b9"></div>
		<div class="bulb lights_on_green" id="b10"></div>
		<div class="bulb lights_on_purple" id="b11"></div>
		<div class="bulb lights_on_orange" id="b12"></div>
		<div class="bulb lights_on_red" id="b13"></div>
		<div class="bulb lights_on_blue" id="b14"></div>
		<div class="bulb lights_on_yellow" id="b15"></div>
		<div class="bulb lights_on_green" id="b16"></div>
		<div class="bulb lights_on_purple" id="b17"></div>
		<div class="bulb lights_on_orange" id="b18"></div>
	{% else %}
		<div class="bulb lights_off_red" id="b1"></div>
		<div class="bulb lights_off_blue" id="b2"></div>
		<div class="bulb lights_off_yellow" id="b3"></div>
		<div class="bulb lights_off_green" id="b4"></div>
		<div class="bulb lights_off_purple" id="b5"></div>
		<div class="bulb lights_off_orange" id="b6"></div>
		<div class="bulb lights_off_red" id="b7"></div>
		<div class="bulb lights_off_blue" id="b8"></div>
		<div class="bulb lights_off_yellow" id="b9"></div>
		<div class="bulb lights_off_green" id="b10"></div>
		<div class="bulb lights_off_purple" id="b11"></div>
		<div class="bulb lights_off_orange" id="b12"></div>
		<div class="bulb lights_off_red" id="b13"></div>
		<div class="bulb lights_off_blue" id="b14"></div>
		<div class="bulb lights_off_yellow" id="b15"></div>
		<div class="bulb lights_off_green" id="b16"></div>
		<div class="bulb lights_off_purple" id="b17"></div>
		<div class="bulb lights_off_orange" id="b18"></div>
	{% endif %}
	</div>

	<div id="lightsSection">
	<div id="lightsHeader"></div>
	<div id="lightsSettings">
		{% if lights_on_time != 0 %}
			<p>Lights on at: {{ lights_on_time }}</p>
		{% endif %}

		<p>Lights off at: {{ lights_off_time }}</p>
		<p>Starting on: {{ start_date }}</p>
	</div>
	<div id="lightsInput">
	<form action="." method="POST">
		<label for="start_date">Start date:</label><input type="date" id="start_date" name="start_date" class="inputInput" />
		<p><label for="off_time">Off time:</label> <input type="time" id="off_time" name="off_time" class="inputInput" /></p>
		<p><input type="submit" name="my-form" value="Apply" /></p>
	</form>
	<div id="startButton">
	{% if settings_set %}
		{% if light_program_running %}
			<a href="/lightsStop"><div id="stop" class="button"><span>Stop</span></div></a>
		{% else %}
			<a href="/lightsStart"><div id="start" class="button"><span>Start</span></div></a>
		{% endif %}
	{% endif %}
	   </div>
	<div id="manControl">
		<label for="man">Manual length:</label><input type="number" id="man">
	<div id="onOffButton">
		{% if lights_on %}
			<a href="/lightsOff"><div id="manualOff" class="button"><span>Turn lights off</span></div></a>
		{% else %}
			<a href="#" onclick="GetURL();" id="manOn"><div id="manualOn" class="button"><span>Turn lights on</span></div></a>
		{% endif %}
	</div>
	<script type="text/JavaScript">
		function GetURL(){
			var myAnchor = document.getElementById("manOn");
			var myTextBox = document.getElementById("man");
			if (myTextBox.value === "") {
				myAnchor.href = "/lightsOn/0";
			} else {
				myAnchor.href = "/lightsOn/" + myTextBox.value;
			}
		}
	</script>
		</div>
	</div>
	{% if message != '' %}
		<div id="lightsMessage">
		{{ message }}
		</div>
	{% endif %}
	</div>

	<div id="navArrows">
		<div id="navRight"></div>
		<div id="navLeft"></div>
	</div>


	<div id="heatSection">
	<div id="sliderCover"></div>
			{% if heat_on %}
				<div id="heatHeader" style="text-shadow: 0 0 10px #fefcc9, 5px -5px 15px #feec85, -10px -10px 20px #ffae34, 10px -20px 25px #ec760c, -10px -30px 30px #cd4606, 0 -40px 35px #973716, 5px -45px 40px #451b0e;color:black">
				Heat Control</div>
			{% else %}
				<div id="heatHeader">Heat Control</div>
			{% endif %}

			<div id="chartContainer"></div>
	</div>
</div>
</body>
</html>